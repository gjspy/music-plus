completely redo popups
make inject.css scripted and not instant/automatic
make tab ignoring work cMusicFixerExtIgnoreTab
the reason we lose error context in bkg world when injecting code is bcs exceptions arent json serializable so cant be transferred. should catch but retrhow String(caught)
can easily edit utils.GetSVG() to look in youtube's SVG store. so we could auto-update to their icons when they change them!
do something to default yt "New platlist" button, beore sidebarEditfeatures appear. make it flex: 50% and let it be big until we change it and put max_width: (dpo we rlly need that?)
"js/ts.implicitProjectConfig.checkJs": true

CACHING NOW DOES artists NOT artist FOR ALBUM, and list of them => {type: MUSIC_PAGE_TYPE_ARTIST} not {type: ARTIST}, __FULL_CONTENTS -> contData
make it not overwrite album/pl.items if items is a list length 0 (bkg)
dont store if id is undefined/null etc.
ensure only stores playlistSetVideoId if has come from album page
"javascript.suggestionActions.enabled": false
popups: try to load one on top of other

REWRITE SIDEBAR EDIT SERVICE, havent yet:
allow more than 1 of each album/pl/paper item.
sections; surrounded by separators, movable as one like a folder
REWRITE MIDDLEWARE, HAVENT DONE THAT.
fix mpad not having custom uploads, allow to remove from
artist page, when auto sets to sort by date, do this before first load?
make ALL CODE work so when clicking "reload" in remote debugging page, no issues arise. PERF for debugging.
more popup: have settings page and tab-specific buttons on popup?

CHANGING SIDEBAR ELEM DESIGN. NO LONGER TAKES COLOUR OF BKG, TAKE COLOUR OF ICON.
SO BKG OF PLAY BUTTON IS BLURRED IMG OF PAPER ITEM.

install node.js to get npm and npx
add this to settings.json:

{
    "eslint.validate": [
        "javascript", // Enable ESLint for JavaScript files
        "javascriptreact", // Enable ESLint for React (if applicable)
        "typescript", // Enable ESLint for TypeScript files (if applicable)
        "typescriptreact" // Enable ESLint for TypeScript React (if applicable)
    ],
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true // Automatically fix ESLint issues on save
    },
    "eslint.run": "onType", // Run ESLint as you type
    "eslint.format.enable": true // Enable ESLint as a formatter
}

!!!! "source.fixAll.eslint": true SET TO "NEVER" ?
npm install --save @types/firefox-webext-browser
npm install globals --save-dev
npx eslint .
install eslint vs code extension

TODO: auto add tag when playlist cache comes in (make sure only happens once, duplicate tags bad)
TODO: make it completely fine to reload, eventDriven runs twice when reloaded, old listener not cancelled
TODO: sidebar no longer has creator for playlist, may filter out on cient if want it back
TODO: offset for linked albums
TODO: **** file name max lengths. need psuedonyms for priv releases. ***
TODO: extraSongs for listItem editor. only have album overwrites right now.
TODO: eat the acid style editing easy, playingFrom is same as loadFrom. how to click folklore and lay from folklore (deluxe)?
TODO: *** MENU ITEMS  OF EDITED LIRS NEED UPDATING ENDPOINTS.
TODO: shuffle!
TODO: LIR menuRender items arent edited?
TODO: make buildFrom and loadFrom different. allow play from original, default updated (so can click TRIR buttons)

TODO caching continuation NO LONGER ADDS TO PLAYLIST / ALBUM "ITEMS" AS HERE WE ONLY GET LIST OF LIRS.

validate user account, so if switch to other yt channel doesnt show all elems from old one?

make paperItems appear incrementally to not lag the page, like do 10 per frame or whatever

FEELS SNAPPY STILL AFTER ADDING PAPERITEMS!


removing last child of folder does not work (inc carousel)
sections that are draggable, another variant of folder
titles for sidebar, variant for separators
spacing elements for sidebar, instead of putting carousels everywhere
something for dfining "Related" albums for playlists
carousels as folder children don't work too well
// IN CACHING: IF cMusicFixerChanged THEN DON'T DO IT.. IF EXT REFRESHES, IT CACHES MODIFIED AS IF ITS TRUE

middleware grid pages, cache sort option so can edit before getting first resp!

playerBar -> musicApp (already done? see fixer.getPolymerControll)
TAB IGNORING DOES NOT WORK :(

for songs with too many plays (we are never ever getting back together 1b tv), see video detail from playerResponse.
	- this returns viewCount for this instance, not including non-explicit/deluxe album/other alts of song. (for "we are never." the original is included in the sum with tv.)

on select lyric (css:select) in lyrics pane,, popup window like spotify thing that people always tweet

FIX PLAYER PAGE SIZING
UPGRADE QUALITY OF FULLSCREEN VIDEO?

**UPCOMING ALBUM subType NOW SHOWS UGH
**storables for grid / continuation cache

ARTISTS:
	- custom discog order (or just in album metadata set exact date!!)
	- custom names (twenty one pilots)

RATINGS:
	- custom ratings (star count?)

SONGS:
	- edit lyrics

ONLY EVER ONE PRIVATE COUNTERPART, AS IF ALBUM HAS SAME NAME THEN WOULD BE ADDED TO SAME ALBUM (PRIVATE)
hide master-buttons on player page!! (no, make it a thing - editing lyrics!!)

shuffling with two albums?

LOAD MWUTILS AS A MODULESCRIPT IN MAIN WORLD, LIKE EDITMODE. DONT SEND OVER FUNC BY FUNC ANYMORE, NO NEED FOR EVAL. ? INJECT WITH contentScript
n3rds-inc.time

update eventdriven & playerPageFeatures.

BUTTON TO UPDATE LIGHT COLOURS BASED ON PLAYING. (IN POPUP)
make CATEGORIES and RATINGS. RATINGS = 1-5 stars or smth, categories = too pop, nice pop, no texture, etc...
CLEAR QUEUE BUTTON DOESNT CLEAR SERVER QUEUE.
CLICK IT, THEN ADD SOMETHING ELSE TO THE QUEUE, THEN SHUFFLE IT.
SERVER RETURNS QUEUE WHICH HAS STUFF FROM OLD QUEUE IN IT!!
can i edit the request before its sent? change videoId to videoIds and add all except the 1
(egiting QP backing playlist, see dissmiss queue endpoint, in buildQueuePanelRenderer stuff) ****

have feature to have player page popout, and "add to queue" adds to that. while popped out, disable play buttons on playlist pages etc? or, make it only play if current is paused.


MAKE MINI WINDOW FOR TABLET, YT MUSIC WIDGET, make it auto appear on login and fill screen, using firefox as desktop backgorund ish user showcase mode smth
COULD DEFINE OWN MUSIC VIDEOS, IN /NEXT API CALL, playlistPanelVideoWrapperRenderer.counterpart.counterpartRenderer + segmentMan**


MAKE IT CHANGE BROWSER THEME: browser.theme.update(), TO IMAGE OF ALBUM PLAYING!!
ON PAGE CLOSE, RESET TO STORED VALUE OF browser.theme.getCurrent() BEFORE STARTING.
STORE THIS! CAN TEL IF ITS OURS OR NOT, BASED ON IF IMG URL IS YT OR NOT.
couldnt set image from external url, try base64? (str repr of img)

MAKE IT NOT EVEN CALL YT, AND RETURN THE RESPONSE IN newFetch, NOT ACCESSING originalFetch()!

now need to edit tworowitemrenderers with custom metadata.
give ability to hide releases: Dawn FM alternate worlds, let me delete the others

custom automix!! or custom radio, based on selected albums (exclude skips!!)
what is makeAUtomixInteractable in playerPgaeFeatures?

"export human data" = give json response of playlist info, what songs (including name, album and id, for manual reading)

DOING NOW:

DOES NOT work with private albums, no auth to get img in bkg script
LIGHT ROTATING almost works, does 4 clicks then jumps one (cw), test acw


CLEAN POPUP DROPDOWN: HAVE DROPDOWN FOR "Queue", "Playlist", "Other": Report, Share, ..

STAGE CACHE UPDATE, ONLY PUBLISH TO SERVER EVERY MINUTE
EG, ON UPDATE FOR WHATEVER, ADD TO QUEUE, TIMEOUT 60 SECONDS, GET MOST RECENT FROM LOCAL STORAGE AND GO?


WHEN DO LYRIC EDITING, STORE THEM AS TXT FILES, NOT IN JSON.
MOVE CACHE TO SEPARATE TXT FILE, SHOULD RLLY HAVE CACHE FOLDER WITH A FILE PER ID.
YES DO THIS SUPER GOOD. EXPORT BUTTON TO RECEIVE A ZIP OF THEM!


LYRIC EDTING! PRIVATE SONGS ALL HAVE A UNIQUE LYRIC ENDPOINT!!
SOUNDS LIKE LINKS!!

tag playlist thumbnails!!

MAKE IT NOT ADD TAGS TWICE WHEN UPDATING
CHECK VOERFLOW ON POPUP
RATINGS NEXT.
edit album artist, check work yes?

want "recently most played" to give a queue full of ur top songs, nto a radio of that song
for when we track plays.

tloas deluxe doesnt have playlistSetVideoIds? //NOT THIS, INDEX issue. (NOW PROBLEM WITH BREACH)
albumify playlist.
folder icons



NEED PUBLIC COUNTERPARTS FOR PUBLIC ARTISTS.
each artist has tons of different topic channels. twent yone pilots channel generated with capitals for The Line, ending in Gw, normal ends with Cw?

SHOW CUSTOMISATION IN MORE PLACES. ALLOW USER TO EDIT ARTIST NAME, AND ENSURE ITS SHOWN EVERYWHERE. _EditLongBylineOfPlaylistPanelVideoRenderer HAS CUSTOMISATION BUT UCreateLongBylineForPlaylistPanel DOES NOT.
CHECK TODOS IN CODE NEXT TO PARTICULARLY LISTITEMRENDERER CUSTOMISING.
EDIT THUMBNAILS IN PPVR, CAREFUL THAT IT DOESNT OVERWRITE WRONG THING (BUILDFROM, WANT EARLIER VERSION SAME JST EDIT DELUXE.)

SKIP AREAS WORK: LOOK AT WHETHER YT STATS THINK I DONT LIKE THE SONG:
polymerController.playerUiService.playerApi.addEventListener("onVideoProgress", (e) => {
	if (e >=180 ) polymerController.playerApi.seekTo(201)
})
polymerController.store.getState().queue.responsiveSignals.videoInteraction

use deletePlaylistEndpoint (from dismiss queue, look at dropdown), to make a new clear queue. can we edit the queue playlist as given in this endpoint to remove removedVideoIds?

song metadata editing - name, explicit, LYRICS, PLAY SECTION! SEE ABOVE! DO NOW!


*** NEW BACKUPS SYSTEM: ***
make it so it saves not literally EVERY time, but one every hour for the past 24 hours, then 1 a day for the past week/month?

TODO: popup, get brightness from lightApi for slider.






CURRENT:
FIGURE OUT playingFrom -> album page clicking on list item. never works? clicking on one from the priv album? we need cParams. (AUTOPLAY.)
playerPage background
autoLights

MUSIC_PAGE_TYPE_PLAYLIST
editMode



























/*
	TOPIC CHANNELS COUNTED AS SAME, BUT DIFFERENT IDS..
	request does not have the browsed to id of the channel.
	eg, cage the elephant, endpoint = UCOk9wZlQNsWjb7gJhnvmbkQ but
		browsed to UCU3rXoHt2bCYbpV3s_sJlgw.
	static CacheSubscribe(request, response) {
		let gathered = request.body.channelIds.map( v => {
			return { id: v, saved: true, type: "C_PAGE_TYPE_CHANNEL_OR_ARTIST" };
		});

		if (!gathered) return;

		UDispatchEventToEW({
			func: "cache-data",
			data: gathered
		});

		return;
	},

	static CacheUnsubscribe(request, response) {
		let gathered = request.body.channelIds.map( v => {
			return { id: v, saved: false, type: "C_PAGE_TYPE_CHANNEL_OR_ARTIST" };
		});

		if (!gathered) return;

		UDispatchEventToEW({
			func: "cache-data",
			data: gathered
		});

		return;
	}*/